<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon.png">
<link rel="shortcut icon" href="favicon.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CleanURL.org - Clean Tracking URLs</title>
  <meta name="description" content="CleanURL.org helps you protect your privacy by instantly removing tracking parameters from links. No login required, 100% free, mobile friendly, and we donâ€™t store your data." />
  <meta name="keywords" content="Remove UTM from URL, Clean tracking links, Remove Google Analytics parameters from URL" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6158321349601120" crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P14M8S60YW"></script>
  
<script>
function cleanUrl() {
  let input = document.getElementById("inputUrl").value.trim();
  if (!/^https?:\/\//i.test(input)) {
    input = "https://" + input;
  }
  try {
    let url = new URL(input);

    // Known redirect hosts to unwrap
    const redirectHosts = [
      'l.facebook.com', 'lm.facebook.com', 'vm.tiktok.com', 't.co',
      'out.reddit.com', 'www.linkedin.com', 'youtu.be', 'www.google.com',
      'l.instagram.com', 'www.pinterest.com', 'www.snapchat.com', 'm.me',
      'discord.com', 'bing.com', 'r.search.yahoo.com', 'us.lrd.yahoo.com', 'wa.me'
    ];
    const redirectParams = ['u', 'url', 'redirect', 'dest', 'target', 'q'];
    const maxRedirectDepth = 5;
    let depth = 0;
    while (redirectHosts.includes(url.hostname) && depth < maxRedirectDepth) {
      let redirected = false;
      for (const param of redirectParams) {
        const redirectTarget = url.searchParams.get(param);
        if (redirectTarget) {
          url = new URL(decodeURIComponent(redirectTarget));
          redirected = true;
          break;
        }
      }
      if (!redirected) break;
      depth++;
    }

    // Expanded tracking parameters to remove
    const toRemove = [
      'utm_source','utm_medium','utm_campaign','utm_term','utm_content','utm_knock',
      'gclid','fbclid','dclid','msclkid','ttclid','li_fat_id','li_medium',
      'mc_cid','mc_eid','trk_contact','trk_msg','trk_module',
      'ref','ref_src','ref_url','referrer','aff_id','aff_sub','aff_source',
      'aff_medium','clickid','feature','app','src_vid','spm','_hsenc','_hsmi',
      '_ke','fbp','_ga','_gl','scid','icid','igshid','hop','pid','aid','pub_id',
      'sub_id','campaign_id','email','e','mid','uid','rid','tag','ascsubtag',
      'rcstdid','yclid','ga_campaign','ga_source','ga_medium','trk','trkid',
      'sourceid','cid','tid','soc_src','soc_trk','WT.mc_id','WT.mc_ev','mkt_tok',
      's_cid','s_kwcid','fb_action_ids','fb_action_types','__twitter_impression',
      'vero_conv','vero_id','referrerid'
    ];
    toRemove.forEach(param => url.searchParams.delete(param));

    const cleanedUrl = url.origin + url.pathname + (url.searchParams.toString() ? '?' + url.searchParams.toString() : '') + url.hash;
    document.getElementById("output").innerHTML = `<strong>Clean URL:</strong><br><a href="${cleanedUrl}" target="_blank">${cleanedUrl}</a>`;
    const copyBtn = document.getElementById("copyBtn");
    copyBtn.setAttribute("data-url", cleanedUrl);
    copyBtn.style.display = "inline-block";
  } catch (err) {
    document.getElementById("output").innerText = "Invalid URL. Please try again.";
    document.getElementById("copyBtn").style.display = "none";
  }
}

function copyToClipboard() {
  const btn = document.getElementById("copyBtn");
  const url = btn.getAttribute("data-url");
  navigator.clipboard.writeText(url).then(() => {
    btn.innerText = "Copied!";
    setTimeout(() => {
      btn.innerText = "Copy to Clipboard";
    }, 2000);
  });
}
</script>

</body>
</html>
